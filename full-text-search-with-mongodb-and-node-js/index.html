
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Full Text Search with MongoDB and Node.js</title>
  <meta name="description" content="">

  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" href="../favicon.ico">

  <script>
  // Uncomment for testing purposes
  // localStorage.clear();
  
  // Place in <head> above all stylesheet declarations
  function loadFont( fontName, woffUrl, woff2Url ) {
  
    // Test for support
    var browser   = navigator.userAgent,
        noSupport = !window.addEventListener || ( browser.match( /(Android (2|3|4.0|4.1|4.2|4.3))|(Opera (Mini|Mobi))/ ) && !browser.match( /Chrome/ ) );
  
    // Return if not supported
    if ( noSupport ) {
      return;
    }
  
    // Set up localStorage
    var loSto = {};
    try {
      loSto = localStorage || {};
    } catch ( ex ) {}
  
    var localStoragePrefix = 'x-font-' + fontName,
        localStorageUrlKey = localStoragePrefix + 'url',
        localStorageCssKey = localStoragePrefix + 'css',
        storedFontUrl      = loSto[ localStorageUrlKey ],
        storedFontCss      = loSto[ localStorageCssKey ];
  
    // Set up <style> element
    var styleElement = document.createElement( 'style' );
    styleElement.rel = 'stylesheet';
    document.head.appendChild( styleElement );
  
    // localStorage check
    if ( storedFontCss && ( storedFontUrl === woffUrl || storedFontUrl === woff2Url ) ) {
  
      // Apply font style sheet
      styleElement.textContent = storedFontCss;
  
    } else {
  
      // Apply new font (WOFF2 if supported)
      var url = ( woff2Url && supportsWoff2() ) ? woff2Url : woffUrl;
  
      // Fetch font data
      var request = new XMLHttpRequest();
      request.open( 'GET', url );
      request.onload = function() {
        if ( request.status >= 200 && request.status < 400 ) {
  
          // Update localStorage
          loSto[ localStorageUrlKey ] = url;
          loSto[ localStorageCssKey ] = styleElement.textContent = request.responseText;
        }
      };
      request.send();
    }
  
    // Check for WOFF2 support
    function supportsWoff2() {
      if ( !window.FontFace ) {
        return false;
      }
  
      var f = new FontFace( 't', 'url( "data:application/font-woff2," ) format( "woff2" )' );
      f.load();
  
      return f.status === 'loading';
    }
  }
  
  // Instantiate font loader
  loadFont(
    'Proxima Nova',
    '/assets/css/fonts-woff.css?v=682061ecfb',
    '/assets/css/fonts-woff2.css?v=682061ecfb'
  );
  </script>
  <link rel="stylesheet" type="text/css" href="../assets/css/style.css?v=682061ecfb">

  <link rel="canonical" href="http://localhost:2368/full-text-search-with-mongodb-and-node-js/">
    
    <meta property="og:site_name" content="Compose Articles">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Full Text Search with MongoDB and Node.js">
    <meta property="og:description" content="Today we are going to look at a full text search in MongoDB and how you can use it from Node.js. Before we go any further, you’ll need a MongoDB 2.6 system. MongoHQ users will also need...">
    <meta property="og:url" content="http://localhost:2368/full-text-search-with-mongodb-and-node-js/">
    <meta property="og:image" content="http://localhost:2368/content/images/2014/12/Magna_Carta_1297_version_Parliament_House_Canberra_Australia-e1403808947640_aid1v2_rjiw79.jpg">
    <meta property="article:published_time" content="2014-06-26T11:52:22.000Z">
    <meta property="article:modified_time" content="2014-12-17T11:16:45.000Z">
    <meta property="article:tag" content="Development">
    <meta property="article:tag" content="express">
    <meta property="article:tag" content="Full Text Search">
    <meta property="article:tag" content="mongodb">
    <meta property="article:tag" content="mongodb 2.6">
    <meta property="article:tag" content="node.js">
    <meta property="article:tag" content="service">
    <meta property="article:tag" content="web">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Full Text Search with MongoDB and Node.js">
    <meta name="twitter:description" content="Today we are going to look at a full text search in MongoDB and how you can use it from Node.js. Before we go any further, you’ll need a MongoDB 2.6 system. MongoHQ users will also need...">
    <meta name="twitter:url" content="http://localhost:2368/full-text-search-with-mongodb-and-node-js/">
    <meta name="twitter:image:src" content="http://localhost:2368/content/images/2014/12/Magna_Carta_1297_version_Parliament_House_Canberra_Australia-e1403808947640_aid1v2_rjiw79.jpg">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Compose Articles",
    "author": {
        "@type": "Person",
        "name": "Dj",
        "image": "//www.gravatar.com/avatar/3c427b45eb4d51770a5ec7f9e4d62c9f?d=404&s=250",
        "url": "http://localhost:2368/author/dj",
        "sameAs": ""
    },
    "headline": "Full Text Search with MongoDB and Node.js",
    "url": "http://localhost:2368/full-text-search-with-mongodb-and-node-js/",
    "datePublished": "2014-06-26T11:52:22.000Z",
    "dateModified": "2014-12-17T11:16:45.000Z",
    "image": "http://localhost:2368/content/images/2014/12/Magna_Carta_1297_version_Parliament_House_Canberra_Australia-e1403808947640_aid1v2_rjiw79.jpg",
    "keywords": "Development, express, Full Text Search, mongodb, mongodb 2.6, node.js, service, web",
    "description": "Today we are going to look at a full text search in MongoDB and how you can use it from Node.js. Before we go any further, you’ll need a MongoDB 2.6 system. MongoHQ users will also need..."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="Compose Articles" href="http://localhost:2368/rss/">
</head>

<body class="post-template tag-development tag-express tag-full-text-search tag-mongodb tag-mongodb-2-6 tag-node-js tag-service tag-web blend-mode">

  <header class="branding" role="banner">
    <a class="logo" href="../"><span class="hidden">Compose</span></a>
    <a class="menu-trigger" href="index.html#?"></a>
    <nav class="main-nav" data-yield="primary_nav" role="navigation">
      <a href="http://127.0.0.1:2368/mongodb/">MongoDB</a>
      <a href="http://127.0.0.1:2368/elasticsearch/">Elasticsearch</a>
      <a href="http://127.0.0.1:2368/rethinkdb/">RethinkDB</a>
      <a href="http://127.0.0.1:2368/redis/">Redis</a>
      <a href="http://127.0.0.1:2368/postgresql/">PostgreSQL</a>
      <a href="https://app.compose.io">Sign in</a>
      <a class="signup" href="../signup/">Sign up</a>
    </nav>
  </header>
  <main class="content container" role="main">

    


<article class="post tag-development tag-express tag-full-text-search tag-mongodb tag-mongodb-2-6 tag-node-js tag-service tag-web container">
  <header class="hero cover-image container" style="background-image: url(../content/images/2014/12/Magna_Carta_1297_version_Parliament_House_Canberra_Australia-e1403808947640_aid1v2_rjiw79.jpg)">
    <h1 class="post-title">Full Text Search with MongoDB and Node.js</h1>
    <small class="post-meta"><time class="post-date" datetime="2014-06-26">June 26th, 2014</time></small>
  </header>

<p>Today we are going to look at a full text search in MongoDB and how you can use it from Node.js. Before we go any further, you’ll need a MongoDB 2.6 system. MongoHQ users will also need to be running on a paid account, either an Elastic Deployment or dedicated account, because we don’t support full text search on the free sandboxes.</p>

<p>Now, full text search in MongoDB is a language sensitive text searching engine which scores matches. There’s one big gotcha you need to know up front and that is you can only have one full text searchable field per collection. That means no documents with multiple indexed text fields for searching. If your schema is that complex and needs full text searching, there are better solutions like Elastic Search.</p>

<p>To explore full text search, we’re going to create a small, and very unpolished web application and walk through the various parts. We open as always by bringing in the various libraries we need. We will be using the Express web framework and the MongoDB Node.js native driver so…</p>

<pre><code>&lt;code class="language-javascript"&gt;var express = require('express');  
var bodyParser = require('body-parser');  
var mongodb = require('mongodb'),  
  MongoClient = mongodb.MongoClient;
var assert = require('assert');  
var util=require('util');

var app = express();  
app.use(bodyParser.json());  
app.use(bodyParser.urlencoded({ extended: true }));

var db;  
</code></pre>

<p>We also do a little setup here to use the Express middleware body-parser. We also create a global variable for db access – this is a technique we discussed in a <a href="../content/images/2014/12/Screenshot-2014-06-26-18_55_09-e1403805564561_oliaha_kjs9wf.png">previous blog posting</a>This is a simple example to get people started and seeing what they can actually achieve with MongoDB 2.6’s full text search. It could easily be enhanced to provide a richer web interface or, probably more usefully, converted into a REST service itself with add and search endpoints to provide other users with search-as-a-service.</p>


<footer class="post-footer big-push">


    <figure class="author">
      <a href="../author/dj/">
        <img src="http://www.gravatar.com/avatar/3c427b45eb4d51770a5ec7f9e4d62c9f?d=404&amp;s=250" alt="Dj">
      </a>
      <figcaption>
        <p>Written on <time class="post-date" datetime="2015-03-13">March 13th, 2015</time> by</p>
        <a href="../author/dj/">Dj</a>
          <p>Content Curator at Compose, Dj has been both a developer and writer since Apples came in ][ flavors and Commodores had Pets.</p>
      </figcaption>
    </figure>




  <nav class="post-nav">
    <section class="site-nav">
      <a class="article-index" data-tooltip="Article Index" href="http://localhost:2368">
        <span class="hidden">Article Index</span>
        <svg>
          <use xlink:href="/assets/images/icons.svg#index"></use>
        </svg>
      </a>
      <a class="subscribe-button" data-tooltip="Suscribe" href="http://localhost:2368/rss/">
        <span class="hidden">Subscribe</span>
        <svg>
          <use xlink:href="/assets/images/icons.svg#subscribe"></use>
        </svg>
      </a>
    </section>
    <section class="share-nav">
      <a class="twitter-button" data-tooltip="Share on Twitter" href="https://twitter.com/share?text=Full%20Text%20Search%20with%20MongoDB%20and%20Node.js&amp;url=http://localhost:2368/full-text-search-with-mongodb-and-node-js/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
        <svg>
          <use xlink:href="/assets/images/icons.svg#twitter"></use>
        </svg>
      </a>
      <a class="facebook-button" data-tooltip="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/full-text-search-with-mongodb-and-node-js/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
        <svg>
          <use xlink:href="/assets/images/icons.svg#facebook"></use>
        </svg>
      </a>
      <a class="google-plus-button" data-tooltip="Share on Google Plus" href="https://plus.google.com/share?url=http://localhost:2368/full-text-search-with-mongodb-and-node-js/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
        <svg>
          <use xlink:href="/assets/images/icons.svg#google-plus"></use>
        </svg>
      </a>
    </section></nav>
  
</footer>

</article>



  </main>

  <footer class="colophon full-push" role="contentinfo">
    <nav>
      <dl>
        <dt>Company</dt>
        <dd><a href="http://127.0.0.1:2368/about-us/">About Us</a><a href="http://blog.compose.io/">Blog</a><a href="http://docs.compose.io/policies">Policies</a><a href="http://127.0.0.1:2368/pricing/">Plans <span class="amp">&amp;</span> Pricing </a><a href="http://127.0.0.1:2368/database-as-a-service/">Database as a Service</a>
        </dd>
      </dl>
      <dl>
        <dt>Support</dt>
        <dd><a href="http://status.compose.io/">System Status</a><a href="http://docs.compose.io/">Support</a><a href="http://docs.compose.io/">Docs</a><a href="http://127.0.0.1:2368/security/">Security</a><a href="https://docs.compose.io/support/new_request.html/?page=www">Contact Us</a>
        </dd>
      </dl>
      <dl>
        <dt>Databases</dt>
        <dd><a href="http://127.0.0.1:2368/mongodb/">MongoDB</a><a href="http://127.0.0.1:2368/elasticsearch/">Elasticsearch</a><a href="http://127.0.0.1:2368/rethinkdb/">RethinkDB</a><a href="http://127.0.0.1:2368/redis/">Redis</a><a href="http://127.0.0.1:2368/enhanced/">Enhanced</a>
        </dd>
      </dl>
      <dl>
        <dt>Deployments</dt>
        <dd><a href="http://127.0.0.1:2368/aws/">AWS</a><a href="http://127.0.0.1:2368/digitalocean/">DigitalOcean</a><a href="http://127.0.0.1:2368/softlayer/">SoftLayer</a><a href="http://127.0.0.1:2368/gogrid/">GoGrid</a>
        </dd>
      </dl>
    </nav>
    <p>© 2015 Compose. All rights reserved. </p>
  </footer>
  <script src="../public/jquery.js?v=682061ecfb"></script>

  <script type="text/javascript" src="../assets/js/site.js?v=682061ecfb"></script>

</body>
